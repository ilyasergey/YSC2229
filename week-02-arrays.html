

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.1. Arrays and Operations on Them &mdash; YSC2229 2021</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2.2. Insertion Sort on Arrays" href="week-02-insert_sort.html" />
    <link rel="prev" title="2. Week 02: Working with Arrays" href="week-02.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> YSC2229: Introductory Data Structures and Algorithms
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="syllabus.html">1. Course Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">2. Software Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="codestyle.html">3. OCaml Style Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="week-01.html">1. Week 01: Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="week-02.html">2. Week 02: Working with Arrays</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.1. Arrays and Operations on Them</a></li>
<li class="toctree-l2"><a class="reference internal" href="week-02-insert_sort.html">2.2. Insertion Sort on Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="week-02-selection_sort.html">2.3. Selection Sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="week-02-exercises.html">2.4. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="week-03.html">3. Week 03: Complexity of Algorithms and Order Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-04.html">4. Week 04: Divide-and-Conquer Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-05.html">5. Week 05: Binary Heaps and Priority Queues</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-06.html">6. Week 06: Abstract Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="midterm.html">7. Midterm Project: Memory Allocation and Reclamation</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-07.html">8. Week 07: Hashing-Based Data Structures</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">YSC2229: Introductory Data Structures and Algorithms</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="week-02.html">2. Week 02: Working with Arrays</a> &raquo;</li>
        
      <li>2.1. Arrays and Operations on Them</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arrays-and-operations-on-them">
<h1>2.1. Arrays and Operations on Them<a class="headerlink" href="#arrays-and-operations-on-them" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>File: <code class="docutils literal notranslate"><span class="pre">ArrayUtil.ml</span></code></li>
</ul>
<p>So far the main data structure we’ve been looking at and using as a
container is an algebraic list. While simple to work with and grow by
adding new elements to the beginning, algebraic lists have a
significant shortcoming: they do not allow an instant access to their
elements. For instance, in a list <code class="docutils literal notranslate"><span class="pre">[6;</span> <span class="pre">8;</span> <span class="pre">5;</span> <span class="pre">2;</span> <span class="pre">3;</span> <span class="pre">7;</span> <span class="pre">0]</span></code>, in order
to obtain its fourth element, one needs to “peel off” four previous
elements by means of deconstructing the list, as implemented by the
function <code class="docutils literal notranslate"><span class="pre">nth</span></code> from the standard OCaml library:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">nth</span> <span class="n">l</span> <span class="n">n</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">invalid_arg</span> <span class="s2">&quot;List.nth&quot;</span> <span class="k">else</span>
  <span class="k">let</span> <span class="k">rec</span> <span class="n">walk</span> <span class="n">l</span> <span class="n">n</span> <span class="o">=</span>
    <span class="k">match</span> <span class="n">l</span> <span class="k">with</span>
    <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="n">failwith</span> <span class="s2">&quot;nth&quot;</span>
    <span class="o">|</span> <span class="n">a</span><span class="o">::</span><span class="n">l</span> <span class="o">-&gt;</span> <span class="k">if</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">a</span> <span class="k">else</span> <span class="n">walk</span> <span class="n">l</span> <span class="o">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span>
  <span class="k">in</span> <span class="n">walk</span> <span class="n">l</span> <span class="n">n</span>
</pre></div>
</div>
<p>Arrays are similar but also complementary to lists. They also encode
data structured in a sequence, but allow immediate access to their
elements, referred to by an <em>index</em> (i.e., position in an array). At
the low-level, arrays are implemented by means of <em>fixed offsets</em>, and
take the full advantage of the random-access memory (RAM), implemented
by the modern computer architectures and allowing one to access a
location with a known address almost immediately.</p>
<p>The price to pay for the instant access is the inability to change the
size of an array dynamically. In essence, once array is created, it
“reserves” a fixed sequence of memory locations in RAM. Indeed, since
more data can be allocated after the array, it is not easy to allow
for its future growth. Therefore, the only way to extend (or shrink)
and array is to allocate a new array of the necessary size.</p>
<p>In OCaml, arrays with all known elements can be created using the
following syntax:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">a1</span> <span class="o">=</span> <span class="o">[|</span><span class="mi">6</span><span class="o">;</span> <span class="mi">8</span><span class="o">;</span> <span class="mi">5</span><span class="o">;</span> <span class="mi">2</span><span class="o">;</span> <span class="mi">3</span><span class="o">;</span> <span class="mi">7</span><span class="o">;</span> <span class="mi">0</span><span class="o">|]</span>
</pre></div>
</div>
<p>creates an array with 7 numbers and assigns its reference to <code class="docutils literal notranslate"><span class="pre">a1</span></code>.
It is also possible to create an array of a fixed size, filled with
some “default” element. For instance,:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">a2</span> <span class="o">=</span> <span class="nn">Array</span><span class="p">.</span><span class="n">make</span> <span class="mi">10</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Creates an array of size 10, filled with zeroes.</p>
<p>Elements of an array are accessed using their indices:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="n">a1</span><span class="o">.(</span><span class="mi">2</span><span class="o">);;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">#</span> <span class="n">a1</span><span class="o">.(</span><span class="mi">0</span><span class="o">);;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">6</span>
</pre></div>
</div>
<p>Notice that the indices start from 0 (not from 1), and end with the
number equal to an array’s length minus one. This is often confusing
and might lead to the infamous <a class="reference external" href="https://en.wikipedia.org/wiki/Off-by-one_error">Off-by-one error</a>. An attempt to
address the elements outside of this range lead to an exception:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="n">a1</span><span class="o">.(</span><span class="mi">7</span><span class="o">);;</span>
<span class="nc">Exception</span><span class="o">:</span> <span class="nc">Invalid_argument</span> <span class="s2">&quot;index out of bounds&quot;</span><span class="o">.</span>
</pre></div>
</div>
<p>One can determine the range of indices as the length of an array as
follows:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="nn">Array</span><span class="p">.</span><span class="n">length</span> <span class="n">a1</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">7</span>
<span class="o">#</span> <span class="n">a1</span><span class="o">.((</span><span class="nn">Array</span><span class="p">.</span><span class="n">length</span> <span class="n">a1</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The elements of an array can be altered using the following syntax.
Notice, that upon changing an array’s element, no new array is created
(hence the update’s type is <code class="docutils literal notranslate"><span class="pre">unit</span></code>), and it’s the initial array that
is modified. In this sense, arrays are similar to references, that are
modified in-place:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="n">a1</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="kt">array</span> <span class="o">=</span> <span class="o">[|</span><span class="mi">6</span><span class="o">;</span> <span class="mi">8</span><span class="o">;</span> <span class="mi">5</span><span class="o">;</span> <span class="mi">2</span><span class="o">;</span> <span class="mi">3</span><span class="o">;</span> <span class="mi">7</span><span class="o">;</span> <span class="mi">0</span><span class="o">|]</span>
<span class="o">#</span> <span class="n">a1</span><span class="o">.(</span><span class="mi">0</span><span class="o">)</span> <span class="o">&lt;-</span> <span class="mi">12</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
<span class="o">#</span> <span class="n">a1</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="kt">array</span> <span class="o">=</span> <span class="o">[|</span><span class="mi">12</span><span class="o">;</span> <span class="mi">8</span><span class="o">;</span> <span class="mi">5</span><span class="o">;</span> <span class="mi">2</span><span class="o">;</span> <span class="mi">3</span><span class="o">;</span> <span class="mi">7</span><span class="o">;</span> <span class="mi">0</span><span class="o">|]</span>
</pre></div>
</div>
<p>The following functions swaps two elements of an array indexed via
<code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">j</span></code> (assuming they are within the array indexing bounds):</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">swap</span> <span class="n">arr</span> <span class="n">i</span> <span class="n">j</span> <span class="o">=</span>
  <span class="k">let</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.(</span><span class="n">i</span><span class="o">)</span> <span class="k">in</span>
  <span class="n">arr</span><span class="o">.(</span><span class="n">i</span><span class="o">)</span> <span class="o">&lt;-</span> <span class="n">arr</span><span class="o">.(</span><span class="n">j</span><span class="o">);</span>
  <span class="n">arr</span><span class="o">.(</span><span class="n">j</span><span class="o">)</span> <span class="o">&lt;-</span> <span class="n">tmp</span>
</pre></div>
</div>
<p>It is useful to be able to print a sub-array <code class="docutils literal notranslate"><span class="pre">arr.(l)</span> <span class="pre">..</span> <span class="pre">arr.(u</span> <span class="pre">-</span> <span class="pre">1)</span></code> of
a given array <code class="docutils literal notranslate"><span class="pre">arr</span></code> for debugging purposes. Here, for the sake of
simplicity we assume the array to be filled with integers:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">print_int_sub_array</span> <span class="n">l</span> <span class="n">u</span> <span class="n">arr</span> <span class="o">=</span>
  <span class="k">assert</span> <span class="o">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">u</span><span class="o">);</span>
  <span class="k">assert</span> <span class="o">(</span><span class="n">u</span> <span class="o">&lt;=</span> <span class="nn">Array</span><span class="p">.</span><span class="n">length</span> <span class="n">arr</span><span class="o">);</span>
  <span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot;[| &quot;</span><span class="o">;</span>
  <span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="n">l</span> <span class="k">to</span> <span class="n">u</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">do</span>
    <span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot;%d&quot;</span> <span class="n">arr</span><span class="o">.(</span><span class="n">i</span><span class="o">);</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">u</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">then</span> <span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot;; &quot;</span>
    <span class="k">else</span> <span class="bp">()</span>
  <span class="k">done</span><span class="o">;</span>
  <span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot; |] &quot;</span>

<span class="k">let</span> <span class="n">print_int_array</span> <span class="n">arr</span> <span class="o">=</span>
  <span class="k">let</span> <span class="n">len</span> <span class="o">=</span> <span class="nn">Array</span><span class="p">.</span><span class="n">length</span> <span class="n">arr</span> <span class="k">in</span>
  <span class="n">print_int_sub_array</span> <span class="mi">0</span> <span class="n">len</span> <span class="n">arr</span>
</pre></div>
</div>
<p>Notice that the procedure <code class="docutils literal notranslate"><span class="pre">print_int_sub_array</span></code> employs the special
bounded iteration loop of a general form:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">variable</span> <span class="o">=</span> <span class="n">start_value</span> <span class="k">to</span> <span class="n">end_value</span> <span class="k">do</span>
  <span class="n">expression</span>
<span class="k">done</span>

<span class="k">for</span> <span class="n">variable</span> <span class="o">=</span> <span class="n">start_value</span> <span class="k">downto</span> <span class="n">end_value</span> <span class="k">do</span>
  <span class="n">expression</span>
<span class="k">done</span>
</pre></div>
</div>
<p>In both cases <code class="docutils literal notranslate"><span class="pre">start_value</span></code> and <code class="docutils literal notranslate"><span class="pre">end_value</span></code> must be of type
<code class="docutils literal notranslate"><span class="pre">int</span></code>, and <code class="docutils literal notranslate"><span class="pre">expression</span></code> is of type <code class="docutils literal notranslate"><span class="pre">unit</span></code>. There is no way to
“break” from the iteration in OCaml, interrupting it, hence sometimes
it is more preferable to use a more general <code class="docutils literal notranslate"><span class="pre">while</span></code>-loop.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="week-02-insert_sort.html" class="btn btn-neutral float-right" title="2.2. Insertion Sort on Arrays" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="week-02.html" class="btn btn-neutral" title="2. Week 02: Working with Arrays" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Ilya Sergey

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"extensions": ["tex2jax.js"], "jax": ["input/TeX", "output/HTML-CSS"]})</script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>